{"version":3,"file":"opten-rxjs.js.map","sources":["ng://@opten/rxjs/lib/storage/observable-storage.ts"],"sourcesContent":["import { Subject, BehaviorSubject, Observable, of as observableOf } from 'rxjs';\r\nimport { share } from 'rxjs/operators';\r\n\r\nimport { Storage as Store } from './storage';\r\n\r\nexport abstract class ObservableStorage<TData> implements Store<TData> {\r\n\tprivate _subject: Subject<TData> = new BehaviorSubject<TData>(this.parse());\r\n\r\n\tconstructor(private _key: string, private _storageProvider: Storage) {}\r\n\r\n\tchange(): Observable<TData> {\r\n\t\treturn this._subject.asObservable().pipe(share());\r\n\t}\r\n\r\n\tget(): Observable<TData> {\r\n\t\treturn observableOf(this.parse());\r\n\t}\r\n\r\n\tset(data: TData): void {\r\n\t\tthis._storageProvider.setItem(this._key, JSON.stringify(data));\r\n\t\tthis._subject.next(this.parse());\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis._storageProvider.removeItem(this._key);\r\n\t\tthis._subject.next(this.parse());\r\n\t}\r\n\r\n\tprotected parse(): TData {\r\n\t\tconst item: string = this._storageProvider.getItem(this._key);\r\n\r\n\t\tif (!item || item == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn JSON.parse(item);\r\n\t}\r\n}\r\n"],"names":["observableOf"],"mappings":";;;;;;;AAAA;;;;AAKA;;;;;IAGC,2BAAoB,IAAY,EAAU,gBAAyB;QAA/C,SAAI,GAAJ,IAAI,CAAQ;QAAU,qBAAgB,GAAhB,gBAAgB,CAAS;QAF3D,aAAQ,GAAmB,IAAI,eAAe,CAAQ,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KAEL;;;;IAEvE,kCAAM;;;IAAN;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KAClD;;;;IAED,+BAAG;;;IAAH;QACC,OAAOA,EAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KAClC;;;;;IAED,+BAAG;;;;IAAH,UAAI,IAAW;QACd,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KACjC;;;;IAED,iCAAK;;;IAAL;QACC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KACjC;;;;IAES,iCAAK;;;IAAf;;YACO,IAAI,GAAW,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;QAE7D,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE;YAC1B,OAAO,IAAI,CAAC;SACZ;QAED,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACxB;IACF,wBAAC;CAAA;;;;;;;;;;;;;;"}
